<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DADUit Game</title>
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary: #5D5CDE;
            --secondary: #FF6B6B;
            --accent: #FFD166;
            --background: #FFFFFF;
            --card-bg: #F8F9FA;
            --text: #333333;
            --muted-text: #6C757D;
        }

        .dark {
            --primary: #6E6DFF;
            --secondary: #FF8080;
            --accent: #FFE066;
            --background: #181818;
            --card-bg: #242424;
            --text: #F8F9FA;
            --muted-text: #ADB5BD;
        }

        body {
            font-family: 'Poppins', sans-serif;
            background-color: var(--background);
            color: var(--text);
            transition: background-color 0.3s, color 0.3s;
        }

        .card {
            background-color: var(--card-bg);
            border-radius: 12px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            transition: transform 0.3s, box-shadow 0.3s;
        }

        .card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 15px rgba(0, 0, 0, 0.1);
        }

        button {
            transition: transform 0.2s, background-color 0.3s;
        }

        button:hover {
            transform: translateY(-2px);
        }

        .dice-container {
            perspective: 1000px;
            width: 100px;
            height: 100px;
            position: relative;
            margin: 0 auto;
        }

        .dice {
            width: 100%;
            height: 100%;
            position: relative;
            transform-style: preserve-3d;
            transition: transform 1.5s ease-out;
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.25);
        }

        .dice-face {
            position: absolute;
            width: 100%;
            height: 100%;
            border-radius: 10%;
            background: linear-gradient(145deg, #ffffff, #f0f0f0);
            box-shadow: inset 0 0 15px rgba(0,0,0,0.1);
            display: flex;
            justify-content: center;
            align-items: center;
        }

        .dot {
            position: absolute;
            width: 16px;
            height: 16px;
            border-radius: 50%;
            background: var(--primary);
            box-shadow: inset 0 0 5px rgba(0,0,0,0.5);
        }

        /* Front face - 1 */
        .dice-face:nth-child(1) {
            transform: translateZ(50px);
        }
        .dice-face:nth-child(1) .dot {
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
        }

        /* Back face - 6 */
        .dice-face:nth-child(2) {
            transform: rotateY(180deg) translateZ(50px);
        }
        .dice-face:nth-child(2) .dot:nth-child(1) {
            top: 25%;
            left: 25%;
        }
        .dice-face:nth-child(2) .dot:nth-child(2) {
            top: 25%;
            left: 50%;
            transform: translateX(-50%);
        }
        .dice-face:nth-child(2) .dot:nth-child(3) {
            top: 25%;
            right: 25%;
        }
        .dice-face:nth-child(2) .dot:nth-child(4) {
            bottom: 25%;
            left: 25%;
        }
        .dice-face:nth-child(2) .dot:nth-child(5) {
            bottom: 25%;
            left: 50%;
            transform: translateX(-50%);
        }
        .dice-face:nth-child(2) .dot:nth-child(6) {
            bottom: 25%;
            right: 25%;
        }

        /* Right face - 3 */
        .dice-face:nth-child(3) {
            transform: rotateY(90deg) translateZ(50px);
        }
        .dice-face:nth-child(3) .dot:nth-child(1) {
            top: 25%;
            left: 25%;
        }
        .dice-face:nth-child(3) .dot:nth-child(2) {
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
        }
        .dice-face:nth-child(3) .dot:nth-child(3) {
            bottom: 25%;
            right: 25%;
        }

        /* Left face - 4 */
        .dice-face:nth-child(4) {
            transform: rotateY(-90deg) translateZ(50px);
        }
        .dice-face:nth-child(4) .dot:nth-child(1) {
            top: 25%;
            left: 25%;
        }
        .dice-face:nth-child(4) .dot:nth-child(2) {
            top: 25%;
            right: 25%;
        }
        .dice-face:nth-child(4) .dot:nth-child(3) {
            bottom: 25%;
            left: 25%;
        }
        .dice-face:nth-child(4) .dot:nth-child(4) {
            bottom: 25%;
            right: 25%;
        }

        /* Top face - 5 */
        .dice-face:nth-child(5) {
            transform: rotateX(90deg) translateZ(50px);
        }
        .dice-face:nth-child(5) .dot:nth-child(1) {
            top: 25%;
            left: 25%;
        }
        .dice-face:nth-child(5) .dot:nth-child(2) {
            top: 25%;
            right: 25%;
        }
        .dice-face:nth-child(5) .dot:nth-child(3) {
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
        }
        .dice-face:nth-child(5) .dot:nth-child(4) {
            bottom: 25%;
            left: 25%;
        }
        .dice-face:nth-child(5) .dot:nth-child(5) {
            bottom: 25%;
            right: 25%;
        }

        /* Bottom face - 2 */
        .dice-face:nth-child(6) {
            transform: rotateX(-90deg) translateZ(50px);
        }
        .dice-face:nth-child(6) .dot:nth-child(1) {
            top: 25%;
            right: 25%;
        }
        .dice-face:nth-child(6) .dot:nth-child(2) {
            bottom: 25%;
            left: 25%;
        }

        /* Modal styles */
        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: rgba(0, 0, 0, 0.5);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 1000;
            opacity: 0;
            visibility: hidden;
            transition: opacity 0.3s, visibility 0.3s;
        }

        .modal-overlay.active {
            opacity: 1;
            visibility: visible;
        }

        .modal {
            background-color: var(--card-bg);
            border-radius: 12px;
            padding: 2rem;
            max-width: 500px;
            width: 90%;
            transform: translateY(-50px);
            transition: transform 0.5s;
        }

        .modal-overlay.active .modal {
            transform: translateY(0);
        }

        /* Progress bars */
        .progress-bar {
            height: 10px;
            background-color: rgba(93, 92, 222, 0.2);
            border-radius: 5px;
            overflow: hidden;
        }

        .progress-bar .progress {
            height: 100%;
            background-color: var(--primary);
            transition: width 0.5s ease-out;
        }

        /* Badges */
        .badge {
            display: inline-block;
            padding: 0.25em 0.6em;
            font-size: 0.75rem;
            font-weight: 600;
            line-height: 1;
            text-align: center;
            white-space: nowrap;
            vertical-align: baseline;
            border-radius: 50rem;
            background-color: var(--accent);
            color: var(--text);
            transition: background-color 0.3s;
        }

        /* Transaction history */
        .transaction {
            border-left: 3px solid transparent;
            transition: background-color 0.3s, border-color 0.3s;
            padding: 0.5rem 0.75rem;
            margin-bottom: 0.5rem;
            border-radius: 0 4px 4px 0;
        }

        .transaction.positive {
            border-left-color: #28a745;
        }

        .transaction.negative {
            border-left-color: #dc3545;
        }

        /* Animation for dice roll */
        @keyframes diceRoll {
            0% {
                transform: rotateX(0) rotateY(0) rotateZ(0);
                box-shadow: 0 0 12px rgba(0,0,0,0.1);
            }
            20% {
                transform: rotateX(180deg) rotateY(90deg) rotateZ(60deg);
                box-shadow: 0 0 15px rgba(0,0,0,0.2);
            }
            40% {
                transform: rotateX(360deg) rotateY(180deg) rotateZ(120deg);
                box-shadow: 0 0 20px rgba(0,0,0,0.3);
            }
            60% {
                transform: rotateX(540deg) rotateY(270deg) rotateZ(180deg);
                box-shadow: 0 0 25px rgba(0,0,0,0.4);
            }
            80% {
                transform: rotateX(720deg) rotateY(360deg) rotateZ(240deg);
                box-shadow: 0 0 20px rgba(0,0,0,0.3);
            }
            100% {
                transform: var(--final-transform);
                box-shadow: 0 0 12px rgba(0,0,0,0.2);
            }
        }

        .rolling {
            animation: diceRoll 1.5s ease-out forwards;
        }

        /* Toast notification */
        .toast-container {
            position: fixed;
            bottom: 20px;
            right: 20px;
            z-index: 9999;
        }

        .toast {
            background-color: var(--card-bg);
            color: var(--text);
            padding: 1rem;
            border-radius: 8px;
            margin-top: 10px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            transform: translateX(100%);
            opacity: 0;
            transition: transform 0.5s, opacity 0.5s;
        }

        .toast.show {
            transform: translateX(0);
            opacity: 1;
        }

        /* Coin animation */
        @keyframes coinFall {
            0% {
                transform: translateY(-20px) rotate(0deg);
                opacity: 0;
            }
            10% {
                opacity: 1;
            }
            100% {
                transform: translateY(80px) rotate(360deg);
                opacity: 0;
            }
        }

        .coin {
            position: absolute;
            width: 20px;
            height: 20px;
            background-color: var(--accent);
            border-radius: 50%;
            box-shadow: 0 0 5px rgba(0, 0, 0, 0.3);
            z-index: 99;
            animation: coinFall 1s forwards;
        }
    </style>
</head>
<body class="min-h-screen flex flex-col">
    <!-- Dark mode detection -->
    <script>
        if (window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches) {
            document.documentElement.classList.add('dark');
        }
        window.matchMedia('(prefers-color-scheme: dark)').addEventListener('change', event => {
            if (event.matches) {
                document.documentElement.classList.add('dark');
            } else {
                document.documentElement.classList.remove('dark');
            }
        });
    </script>

    <!-- Welcome screen -->
    <div id="welcome-screen" class="fixed inset-0 z-50 flex items-center justify-center bg-white dark:bg-gray-900 p-4">
        <div class="text-center max-w-md w-full">
            <div class="mb-4">
                <h1 class="text-4xl font-bold mb-2">DADUit Game</h1>
                <div class="flex justify-center space-x-2 mb-2">
                    <span class="text-2xl">ðŸŒ™</span>
                    <span class="text-2xl">ðŸŽ²ðŸ’°</span>
                </div>
                <h2 class="text-2xl font-semibold mb-4">Welcome to DADUit Game!</h2>
                <p class="mb-6">Get ready to embark on an exciting financial journey! In this game, you'll navigate through real-life financial scenarios while managing your money wisely.</p>
            </div>

            <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-6">
                <div class="card p-4">
                    <h3 class="font-semibold mb-2">Starting Balance:</h3>
                    <p class="text-xl font-bold text-green-600 dark:text-green-400">RM5,000</p>
                </div>
                <div class="card p-4">
                    <h3 class="font-semibold mb-2">Goal:</h3>
                    <p>Reach RM10,000 by day 30</p>
                </div>
            </div>

            <div class="card p-5 mb-6">
                <h3 class="font-semibold mb-2">Gameplay:</h3>
                <ul class="text-left space-y-2">
                    <li class="flex items-start">
                        <span class="mr-2">ðŸŽ²</span>
                        <span>Roll the dice to move through days</span>
                    </li>
                    <li class="flex items-start">
                        <span class="mr-2">ðŸ’¼</span>
                        <span>Face random financial decisions</span>
                    </li>
                    <li class="flex items-start">
                        <span class="mr-2">ðŸ“Š</span>
                        <span>Make smart choices to grow your money</span>
                    </li>
                </ul>
                <p class="mt-3 text-sm italic">Watch out for special events, paydays, and expenses as you progress!</p>
            </div>

            <div class="mb-6">
                <h3 class="font-semibold mb-3">Select Difficulty:</h3>
                <div class="flex justify-center space-x-4">
                    <button data-difficulty="Easy" class="difficulty-btn bg-green-500 hover:bg-green-600 text-white px-4 py-2 rounded-lg">Easy</button>
                    <button data-difficulty="Normal" class="difficulty-btn bg-yellow-500 hover:bg-yellow-600 text-white px-4 py-2 rounded-lg">Normal</button>
                    <button data-difficulty="Hard" class="difficulty-btn bg-red-500 hover:bg-red-600 text-white px-4 py-2 rounded-lg">Hard</button>
                </div>
            </div>

            <button id="start-game" class="bg-primary text-white rounded-lg px-6 py-3 font-bold text-lg hover:bg-opacity-90 transition-all">Let's Begin!</button>
        </div>
    </div>

    <!-- Main game screen (initially hidden) -->
    <header class="bg-primary text-white p-4" style="display: none;">
        <div class="container mx-auto flex flex-col sm:flex-row justify-between items-center">
            <h1 class="text-2xl font-bold mb-2 sm:mb-0">DADUit Game</h1>
            <div class="flex items-center space-x-2">
                <span id="day-display" class="text-xl font-bold">1</span>
                <button id="share-btn" class="bg-white text-primary rounded-full p-2">
                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" class="w-5 h-5">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8.684 13.342C8.886 12.938 9 12.482 9 12c0-.482-.114-.938-.316-1.342m0 2.684a3 3 0 110-2.684m0 2.684l6.632 3.316m-6.632-6l6.632-3.316m0 0a3 3 0 105.367-2.684 3 3 0 00-5.367 2.684zm0 9.316a3 3 0 105.368 2.684 3 3 0 00-5.368-2.684z" />
                    </svg>
                </button>
            </div>
        </div>
    </header>

    <main class="container mx-auto flex-grow p-4" style="display: none;">
        <div class="grid grid-cols-1 lg:grid-cols-3 gap-6">
            <!-- Left column: Dice and Player Stats -->
            <div class="lg:col-span-1 space-y-6">
                <!-- Dice section -->
                <section class="card p-6 text-center">
                    <h2 class="text-xl font-semibold mb-6">Roll Dice to Progress</h2>
                    <div class="dice-container mb-6">
                        <div class="dice" id="dice">
                            <div class="dice-face">
                                <div class="dot"></div>
                            </div>
                            <div class="dice-face">
                                <div class="dot"></div>
                                <div class="dot"></div>
                                <div class="dot"></div>
                                <div class="dot"></div>
                                <div class="dot"></div>
                                <div class="dot"></div>
                            </div>
                            <div class="dice-face">
                                <div class="dot"></div>
                                <div class="dot"></div>
                                <div class="dot"></div>
                            </div>
                            <div class="dice-face">
                                <div class="dot"></div>
                                <div class="dot"></div>
                                <div class="dot"></div>
                                <div class="dot"></div>
                            </div>
                            <div class="dice-face">
                                <div class="dot"></div>
                                <div class="dot"></div>
                                <div class="dot"></div>
                                <div class="dot"></div>
                                <div class="dot"></div>
                            </div>
                            <div class="dice-face">
                                <div class="dot"></div>
                                <div class="dot"></div>
                            </div>
                        </div>
                    </div>
                    <button id="roll-dice" class="bg-primary hover:bg-opacity-90 text-white rounded-lg px-6 py-3 font-bold transition-all">
                        Roll Dice
                    </button>
                </section>

                <!-- Player stats section -->
                <section class="card p-6">
                    <h2 class="text-xl font-semibold mb-4">Player Stats</h2>
                    <div class="space-y-4">
                        <div>
                            <div class="flex justify-between mb-1">
                                <span>Money:</span>
                                <span id="money-display" class="font-bold text-green-600 dark:text-green-400">RM5,000</span>
                            </div>
                            <div class="progress-bar">
                                <div id="money-progress" class="progress" style="width: 50%"></div>
                            </div>
                        </div>
                        <div>
                            <div class="flex justify-between mb-1">
                                <span>Current Day:</span>
                                <span id="current-day-display" class="font-bold">1</span>
                            </div>
                            <div class="progress-bar">
                                <div id="day-progress" class="progress" style="width: 3.33%"></div>
                            </div>
                        </div>
                        <div>
                            <div class="flex justify-between">
                                <span>Difficulty:</span>
                                <span id="difficulty-display" class="font-bold text-green-600 dark:text-green-400">Easy</span>
                            </div>
                        </div>
                    </div>
                </section>
            </div>

            <!-- Middle column: Skills and Transactions -->
            <div class="lg:col-span-1 space-y-6">
                <!-- Skills section -->
                <section class="card p-6">
                    <h2 class="text-xl font-semibold mb-4">Skills</h2>
                    <div class="space-y-4">
                        <div>
                            <div class="flex justify-between mb-1">
                                <span>Financial Literacy</span>
                                <span id="financial-literacy-level" class="font-bold">1</span>
                            </div>
                            <div class="progress-bar">
                                <div id="financial-literacy-progress" class="progress" style="width: 10%"></div>
                            </div>
                        </div>
                        <div>
                            <div class="flex justify-between mb-1">
                                <span>Entrepreneurship</span>
                                <span id="entrepreneurship-level" class="font-bold">1</span>
                            </div>
                            <div class="progress-bar">
                                <div id="entrepreneurship-progress" class="progress" style="width: 10%"></div>
                            </div>
                        </div>
                        <div>
                            <div class="flex justify-between mb-1">
                                <span>Education</span>
                                <span id="education-level" class="font-bold">1</span>
                            </div>
                            <div class="progress-bar">
                                <div id="education-progress" class="progress" style="width: 10%"></div>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- Transactions section -->
                <section class="card p-6">
                    <h2 class="text-xl font-semibold mb-4">Recent Transactions</h2>
                    <div id="transactions-container" class="space-y-2 max-h-60 overflow-y-auto">
                        <div class="transaction positive">
                            <div class="flex justify-between">
                                <span>Starting Balance</span>
                                <span class="font-semibold text-green-600 dark:text-green-400">+RM5,000</span>
                            </div>
                        </div>
                    </div>
                </section>
            </div>

            <!-- Right column: Achievements -->
            <div class="lg:col-span-1 space-y-6">
                <!-- Achievements section -->
                <section class="card p-6">
                    <h2 class="text-xl font-semibold mb-4">Achievements</h2>
                    <div id="achievements-container" class="grid grid-cols-2 gap-3">
                        <!-- Achievements will be added here -->
                    </div>
                </section>

                <!-- Share section -->
                <section class="card p-6">
                    <h2 class="text-xl font-semibold mb-4">Share</h2>
                    <div class="flex flex-col space-y-3">
                        <button id="share-fb" class="bg-blue-600 hover:bg-blue-700 text-white rounded-lg px-4 py-2 flex items-center justify-center">
                            <svg class="w-5 h-5 mr-2" viewBox="0 0 24 24" fill="white" xmlns="http://www.w3.org/2000/svg">
                                <path d="M24 12.073c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.99 4.388 10.954 10.125 11.854v-8.385H7.078v-3.47h3.047V9.43c0-3.007 1.792-4.669 4.533-4.669 1.312 0 2.686.235 2.686.235v2.953H15.83c-1.491 0-1.956.925-1.956 1.874v2.25h3.328l-.532 3.47h-2.796v8.385C19.612 23.027 24 18.062 24 12.073z"/>
                            </svg>
                            Share on Facebook
                        </button>
                        <button id="share-wa" class="bg-green-600 hover:bg-green-700 text-white rounded-lg px-4 py-2 flex items-center justify-center">
                            <svg class="w-5 h-5 mr-2" viewBox="0 0 24 24" fill="white" xmlns="http://www.w3.org/2000/svg">
                                <path d="M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413z"/>
                            </svg>
                            Share on WhatsApp
                        </button>
                    </div>
                </section>
            </div>
        </div>
    </main>

    <!-- Financial Challenge Modal -->
    <div id="challenge-modal" class="modal-overlay">
        <div class="modal">
            <h2 id="challenge-title" class="text-2xl font-bold mb-4">Financial Challenge</h2>
            <p id="challenge-description" class="mb-6"></p>
            <div id="challenge-options" class="space-y-3 mb-6">
                <!-- Options will be dynamically added here -->
            </div>
        </div>
    </div>

    <!-- Toast container -->
    <div class="toast-container"></div>

    <script>
        // Game state
        const gameState = {
            money: 5000,
            currentDay: 1,
            difficulty: 'Easy',
            skills: {
                financialLiteracy: { level: 1, progress: 0 },
                entrepreneurship: { level: 1, progress: 0 },
                education: { level: 1, progress: 0 }
            },
            transactions: [
                { description: 'Starting Balance', amount: 5000, type: 'positive' }
            ],
            achievements: [],
            goalMoney: 10000,
            maxDays: 30,
            isRolling: false
        };

        // DOM Elements
        const welcomeScreen = document.getElementById('welcome-screen');
        const startGameBtn = document.getElementById('start-game');
        const difficultyBtns = document.querySelectorAll('.difficulty-btn');
        const rollDiceBtn = document.getElementById('roll-dice');
        const dice = document.getElementById('dice');
        const moneyDisplay = document.getElementById('money-display');
        const moneyProgress = document.getElementById('money-progress');
        const currentDayDisplay = document.getElementById('current-day-display');
        const dayDisplay = document.getElementById('day-display');
        const dayProgress = document.getElementById('day-progress');
        const difficultyDisplay = document.getElementById('difficulty-display');
        const financialLiteracyLevel = document.getElementById('financial-literacy-level');
        const financialLiteracyProgress = document.getElementById('financial-literacy-progress');
        const entrepreneurshipLevel = document.getElementById('entrepreneurship-level');
        const entrepreneurshipProgress = document.getElementById('entrepreneurship-progress');
        const educationLevel = document.getElementById('education-level');
        const educationProgress = document.getElementById('education-progress');
        const transactionsContainer = document.getElementById('transactions-container');
        const achievementsContainer = document.getElementById('achievements-container');
        const challengeModal = document.getElementById('challenge-modal');
        const challengeTitle = document.getElementById('challenge-title');
        const challengeDescription = document.getElementById('challenge-description');
        const challengeOptions = document.getElementById('challenge-options');
        const shareFbBtn = document.getElementById('share-fb');
        const shareWaBtn = document.getElementById('share-wa');
        const shareBtn = document.getElementById('share-btn');

        // Financial challenges data
        const challenges = [
            {
                title: 'Unexpected Medical Bill',
                description: 'You have a medical emergency and need to pay for treatment.',
                options: [
                    { text: 'Pay from savings (RM500)', effect: { money: -500, skills: { financialLiteracy: 5 } } },
                    { text: 'Use credit card with high interest (RM700)', effect: { money: -700, skills: { financialLiteracy: -5 } } },
                    { text: 'Ignore and hope it resolves itself', effect: { money: -1000, skills: { financialLiteracy: -10 } } }
                ]
            },
            {
                title: 'Investment Opportunity',
                description: 'A friend offers you an investment opportunity in a startup.',
                options: [
                    { text: 'Invest RM1000', effect: { money: getRandom(-500, 2000), skills: { entrepreneurship: 10 } } },
                    { text: 'Invest RM500', effect: { money: getRandom(-200, 900), skills: { entrepreneurship: 5 } } },
                    { text: 'Decline the offer', effect: { skills: { financialLiteracy: 2 } } }
                ]
            },
            {
                title: 'Education Course',
                description: 'You found an online course that could enhance your skills.',
                options: [
                    { text: 'Pay for premium course (RM800)', effect: { money: -800, skills: { education: 15, financialLiteracy: 5 } } },
                    { text: 'Choose basic course (RM300)', effect: { money: -300, skills: { education: 8 } } },
                    { text: 'Find free resources online', effect: { skills: { education: 3 } } }
                ]
            },
            {
                title: 'Car Trouble',
                description: 'Your car breaks down and needs repairs.',
                options: [
                    { text: 'Fix it at certified workshop (RM1200)', effect: { money: -1200, skills: { financialLiteracy: 2 } } },
                    { text: 'Find affordable mechanic (RM600)', effect: { money: -600, skills: { financialLiteracy: 5 } } },
                    { text: 'Try DIY repair', effect: { money: getRandom(-300, -100), skills: { education: 8 } } }
                ]
            },
            {
                title: 'Side Hustle Opportunity',
                description: 'You have a chance to start a small side business.',
                options: [
                    { text: 'Invest time and RM500', effect: { money: getRandom(300, 1500), skills: { entrepreneurship: 15 } } },
                    { text: 'Invest time only', effect: { money: getRandom(100, 500), skills: { entrepreneurship: 8 } } },
                    { text: 'Decline and focus on current job', effect: { money: getRandom(200, 400), skills: { financialLiteracy: 3 } } }
                ]
            }
        ];

        // Achievements data
        const achievementsData = [
            { id: 'first_roll', title: 'First Steps', description: 'Roll the dice for the first time', icon: 'ðŸŽ²' },
            { id: 'money_5000', title: 'Saver', description: 'Save RM5,000', icon: 'ðŸ’°' },
            { id: 'money_7500', title: 'Investor', description: 'Reach RM7,500', icon: 'ðŸ“ˆ' },
            { id: 'money_10000', title: 'Financial Freedom', description: 'Reach RM10,000', icon: 'ðŸ’¸' },
            { id: 'financial_literacy_3', title: 'Money Smart', description: 'Reach Financial Literacy level 3', icon: 'ðŸ“š' },
            { id: 'entrepreneurship_3', title: 'Entrepreneur', description: 'Reach Entrepreneurship level 3', icon: 'ðŸš€' },
            { id: 'education_3', title: 'Scholar', description: 'Reach Education level 3', icon: 'ðŸŽ“' },
            { id: 'all_skills_2', title: 'Jack of All Trades', description: 'Get all skills to level 2', icon: 'ðŸ”§' }
        ];

        // Initialize the game
        function initGame() {
            // Set difficulty display based on selected difficulty
            difficultyDisplay.textContent = gameState.difficulty;
            if (gameState.difficulty === 'Easy') {
                difficultyDisplay.className = 'font-bold text-green-600 dark:text-green-400';
            } else if (gameState.difficulty === 'Normal') {
                difficultyDisplay.className = 'font-bold text-yellow-600 dark:text-yellow-400';
            } else {
                difficultyDisplay.className = 'font-bold text-red-600 dark:text-red-400';
            }
            
            updateUI();
            hideWelcomeScreen();
        }

        // Event Listeners
        startGameBtn.addEventListener('click', initGame);

        difficultyBtns.forEach(btn => {
            btn.addEventListener('click', () => {
                // Remove active class from all buttons
                difficultyBtns.forEach(b => b.classList.remove('ring-4', 'ring-white', 'ring-opacity-50'));
                // Add active class to clicked button
                btn.classList.add('ring-4', 'ring-white', 'ring-opacity-50');
                // Set difficulty
                gameState.difficulty = btn.dataset.difficulty;
                
                // Enable the start button to make it clear the next step
                startGameBtn.classList.add('animate-pulse');
            });
        });

        rollDiceBtn.addEventListener('click', rollDice);
        shareFbBtn.addEventListener('click', shareOnFacebook);
        shareWaBtn.addEventListener('click', shareOnWhatsApp);
        shareBtn.addEventListener('click', showShareOptions);

        function hideWelcomeScreen() {
            welcomeScreen.style.opacity = '0';
            welcomeScreen.style.transition = 'opacity 0.5s ease-out';
            
            // Make sure the game screen is visible
            document.querySelector('header').style.display = 'block';
            document.querySelector('main').style.display = 'block';
            
            setTimeout(() => {
                welcomeScreen.style.display = 'none';
            }, 500);
        }

        function rollDice() {
            if (gameState.isRolling) return;
            
            gameState.isRolling = true;
            rollDiceBtn.disabled = true;
            rollDiceBtn.classList.add('opacity-50', 'cursor-not-allowed');
            
            // Play dice rolling sound
            const rollSound = new Audio('data:audio/wav;base64,//uQRAAAAWMSLwUIYAAsYkXgoQwAEaYLWfkWgAI0wWs/ItAAAGDgYtAgAyN+QWaAAihwMWm4G8QQRDiMcCBcH3Cc+CDv/7xA4Tvh9Rz/y8QADBwMWgQAZG/ILNAARQ4GLTcDeIIIhxGOBAuD7hOfBB3/94gcJ3w+o5/5eIAIAAAVwWgQAVQ2ORaIQwEMAJiDg95G4nQL7mQVWI6GwRcfsZAcsKkJvxgxEjzFUgfHoSQ9Qq7KNwqHwuB13MA4a1q/DmBrHgPcmjiGoh//EwC5nGPEmS4RcfkVKOhJf+WOgoxJclFz3kgn//dBA+ya1GhurNn8zb//9NNutNuhz31f////9vt///z+IdAEAAAK4LQIAKobHItEIYCGAExBwe8jcToF9zIKrEdDYIuP2MgOWFSE34wYiR5iqQPj0JIeoVdlG4VD4XA67mAcNa1fhzA1jwHuTRxDUQ//iYBczjHiTJcIuPyKlHQkv/LHQUYkuSi57yQT//uggfZNajQ3Vmz+Zt//+mm3Wm3Q576v////+32///5/EOgAAADVghQAAAAA//uQZAUAB1WI0PZugAAAAAoQwAAAEk3nRd2qAAAAACiDgAAAAAAABCqEEQRLCgwpBGMlJkIz8jKhGvj4k6jzRnqasNKIeoh5gI7BJaC1A1AoNBjJgbyApVS4IDlZgDU5WUAxEKDNmmALHzZp0Fkz1FMTmGFl1FMEyodIavcCAUHDWrKAIA4aa2oCgILEBupZgHvAhEBcZ6joQBxS76AgccrFlczBvKLC0QI2cBoCFvfTDAo7eoOQInqDPBtvrDEZBNYN5xwNwxQRfw8ZQ5wQVLvO8OYU+mHvFLlDh05Mdg7BT6YrRPpCBznMB2r//xKJjyyOh+cImr2/4doscwD6neZjuZR4AgAABYAAAABy1xcdQtxYBYYZdifkUDgzzXaXn98Z0oi9ILU5mBjFANmRwlVJ3/6jYDAmxaiDG3/6xjQQCCKkRb/6kg/wW+kSJ5//rLobkLSiKmqP/0ikJuDaSaSf/6JiLYLEYnW/+kXg1WRVJL/9EmQ1YZIsv/6Qzwy5qk7/+tEU0nkls3/zIUMPKNX/6yZLf+kFgAfgGyLFAUwY//uQZAUABcd5UiNPVXAAAApAAAAAE0VZQKw9ISAAACgAAAAAVQIygIElVrFkBS+Jhi+EAuu+lKAkYUEIsmEAEoMeDmCETMvfSHTGkF5RWH7kz/ESHWPAq/kcCRhqBtMdokPdM7vil7RG98A2sc7zO6ZvTdM7pmOUAZTnJW+NXxqmd41dqJ6mLTXxrPpnV8DouEFvl24fnEauzJf1+2+6vhOI+sdV3H+EAJS8weHwfJrR3XpL4oWsYT0FN2MzAyaD4u0FjUr5+8wRrNbXgD/n/oAimwSpHdQifTxOuzLl678B/7YgXNr/w0bdNebl58/Ug3R/91/+/9H9S/6H00+/wFolBl9yAAAAA==');
            rollSound.play();
            
            // Check for first roll achievement
            if (!gameState.achievements.includes('first_roll')) {
                unlockAchievement('first_roll');
            }
            
            // Random dice value (1-6)
            const roll = Math.floor(Math.random() * 6) + 1;
            
            // Show rolling text
            showToast("Rolling dice...", "info");
            
            // Define final transforms for each dice face
            const transforms = [
                'rotateX(0deg) rotateY(0deg) rotateZ(0deg)',      // 1
                'rotateX(0deg) rotateY(180deg) rotateZ(0deg)',    // 6
                'rotateX(0deg) rotateY(-90deg) rotateZ(0deg)',    // 4
                'rotateX(0deg) rotateY(90deg) rotateZ(0deg)',     // 3
                'rotateX(-90deg) rotateY(0deg) rotateZ(0deg)',    // 2
                'rotateX(90deg) rotateY(0deg) rotateZ(0deg)'      // 5
            ];
            
            // Set final transform based on roll value
            dice.style.setProperty('--final-transform', transforms[roll - 1]);
            
            // Add rolling animation
            dice.classList.add('rolling');
            
            // Wait for animation to complete
            setTimeout(() => {
                // Play dice landing sound
                const landSound = new Audio('data:audio/wav;base64,UklGRjwOAABXQVZFZm10IBAAAAABAAEAESsAACJWAAACABAAZGF0YRgOAACBgYGBgYGAgH9+fn5+fn9/gIGCgoGBgH9+fXx7e3t8fH1+f4CBgoKCgYB/fn18e3p6ent8fX5/gIGCg4OCgYB+fXt6eXl5ent8fX+AgoOEhIOCgH59e3p4eHh5ent9f4GDhYaGhYSCgH58enh3d3d4ent+gIKFh4iIh4WDgX98enh2dnZ3eHp8f4KFiIqKiYeGg4B+e3l2dXV1d3h7foGEh4qMjIuJhoSBfnt4dnR0dHV3en2AhIeKjY6NjIqHhIB9enh1c3N0dXd6fYGFiIyPkI+NjIiGgn97eHVzcnJzdXd7foKGio6RkpGQjomGgn56d3RycXFydHd6fYKGi4+SlJOSkIyJhYF+eXdzb29vcXR3en+Di5CUl5eWlI+Mh4N/e3h0cW5ubXByd3p/hIqPlpqbmpiWkIyHg357d3Nva2ttb3N3e4CIjpWbn6CfnZiTjoiFgHt2cm9sa2xucXV6gIaPlZyhoqGfmpaRi4aBfHdzcG1ramptcHR5f4aOlaChoqKgnpqVkImEf3l1cW1qZ2doa25zd36FjZWdoqWmpaKem5WPiYN+eHRwbGhlZWVpbnJ3fYSNlaCoq6yrqaSgmZONhoB6dXFtaWVjY2Voam52fIOMlaCosLKzsamkoZuUjYd/e3ZxbWhjYWBiZmtwdXyEjJWgqLG2t7a0sKqjnZaPhYB7dnJuaWVhX19iZmtxdoGKk5+osLe7u7q2sq2lnpePhX96dnFtZ2RgXl1gZGhtc3uIkJunsbjAw8PCvrizramhnJOMhH56dXBqZWFeW1teYmZrdHqGjpinr7jAx8jIxcG7trCon5iPiYJ9eHNuaGNfW1lYWmBkbXN6g42Yo6+5wcnMzcvIw722sKeflY6JgXx3c21oY19bWFdYXWJqcHiEjZekr7rCys7Qz83JxL+3saeek4uGf3l0b2llYFxZVlVXW2Bnb3aDjJajr7vDzNLU1NLQy8a/uLGnnZOLhX53c29qZWFdWVZVVllgZm12go2XpLC8xM3U2NnY1tHMxb+3sKWbkIiCe3ZxbGdix\');
                landSound.play();
                
                // Show dice roll result with animation
                showToast(`You rolled a ${roll}!`, "success");
                
                // Handle dice roll result
                handleDiceRoll(roll);
                
                // Reset dice
                dice.classList.remove('rolling');
                gameState.isRolling = false;
                rollDiceBtn.disabled = false;
                rollDiceBtn.classList.remove('opacity-50', 'cursor-not-allowed');
            }, 1500);
        }

        function handleDiceRoll(roll) {
            // Advance day by roll amount
            gameState.currentDay += roll;
            
            // Cap at max days
            if (gameState.currentDay > gameState.maxDays) {
                gameState.currentDay = gameState.maxDays;
                endGame();
                return;
            }
            
            // Add some coins animation
            addCoins(roll);
            
            // Handle payday (every 7 days)
            if (gameState.currentDay % 7 === 0) {
                const payAmount = 1000 + (gameState.skills.education.level * 200);
                gameState.money += payAmount;
                addTransaction(`Payday Salary`, payAmount, 'positive');
                showToast(`Payday! Received RM${payAmount}`, 'success');
            }
            
            // Random money fluctuation based on roll and difficulty
            let randomMoney = 0;
            if (gameState.difficulty === 'Easy') {
                randomMoney = getRandom(50, 200) * roll;
            } else if (gameState.difficulty === 'Normal') {
                randomMoney = getRandom(-100, 200) * roll;
            } else {
                randomMoney = getRandom(-200, 150) * roll;
            }
            
            if (randomMoney !== 0) {
                gameState.money += randomMoney;
                if (randomMoney > 0) {
                    addTransaction(`Daily Earnings`, randomMoney, 'positive');
                } else {
                    addTransaction(`Daily Expenses`, randomMoney, 'negative');
                }
            }
            
            // Trigger random challenges (30% chance)
            if (Math.random() < 0.3) {
                showChallenge();
            }
            
            // Check achievements
            checkAchievements();
            
            // Update UI
            updateUI();
        }

        function addCoins(count) {
            const diceContainer = document.querySelector('.dice-container');
            const rect = diceContainer.getBoundingClientRect();
            
            for (let i = 0; i < count; i++) {
                const coin = document.createElement('div');
                coin.classList.add('coin');
                
                // Random position around the dice
                const randomX = Math.floor(Math.random() * 100) - 50;
                coin.style.left = `calc(50% + ${randomX}px)`;
                
                // Random delay for natural effect
                const delay = Math.random() * 0.5;
                coin.style.animationDelay = `${delay}s`;
                
                diceContainer.appendChild(coin);
                
                // Remove after animation
                setTimeout(() => {
                    coin.remove();
                }, 1500);
            }
        }

        function showChallenge() {
            // Select random challenge
            const challenge = challenges[Math.floor(Math.random() * challenges.length)];
            
            // Set challenge content
            challengeTitle.textContent = challenge.title;
            challengeDescription.textContent = challenge.description;
            
            // Clear previous options
            challengeOptions.innerHTML = '';
            
            // Add options
            challenge.options.forEach((option, index) => {
                const btn = document.createElement('button');
                btn.className = 'w-full bg-primary hover:bg-opacity-90 text-white rounded-lg px-4 py-2 transition-all';
                btn.textContent = option.text;
                
                btn.addEventListener('click', () => {
                    handleChallengeChoice(option.effect);
                    hideChallenge();
                });
                
                challengeOptions.appendChild(btn);
            });
            
            // Show modal
            challengeModal.classList.add('active');
        }

        function hideChallenge() {
            challengeModal.classList.remove('active');
        }

        function handleChallengeChoice(effect) {
            // Apply money effect
            if (effect.money) {
                gameState.money += effect.money;
                if (effect.money > 0) {
                    addTransaction('Challenge Reward', effect.money, 'positive');
                } else {
                    addTransaction('Challenge Cost', effect.money, 'negative');
                }
            }
            
            // Apply skill effects
            if (effect.skills) {
                for (const [skill, points] of Object.entries(effect.skills)) {
                    if (skill === 'financialLiteracy') {
                        addSkillPoints('financialLiteracy', points);
                    } else if (skill === 'entrepreneurship') {
                        addSkillPoints('entrepreneurship', points);
                    } else if (skill === 'education') {
                        addSkillPoints('education', points);
                    }
                }
            }
            
            // Check achievements
            checkAchievements();
            
            // Update UI
            updateUI();
        }

        function addSkillPoints(skill, points) {
            gameState.skills[skill].progress += points;
            
            // Check for level up
            if (gameState.skills[skill].progress >= 100) {
                gameState.skills[skill].level += 1;
                gameState.skills[skill].progress = gameState.skills[skill].progress - 100;
                showToast(`${formatSkillName(skill)} increased to level ${gameState.skills[skill].level}!`, 'success');
            }
        }

        function formatSkillName(skill) {
            if (skill === 'financialLiteracy') return 'Financial Literacy';
            if (skill === 'entrepreneurship') return 'Entrepreneurship';
            if (skill === 'education') return 'Education';
            return skill;
        }

        function addTransaction(description, amount, type) {
            gameState.transactions.unshift({
                description,
                amount,
                type
            });
            
            // Keep only the last 10 transactions
            if (gameState.transactions.length > 10) {
                gameState.transactions.pop();
            }
        }

        function unlockAchievement(id) {
            if (!gameState.achievements.includes(id)) {
                gameState.achievements.push(id);
                
                const achievement = achievementsData.find(a => a.id === id);
                if (achievement) {
                    showToast(`Achievement Unlocked: ${achievement.title}`, 'achievement');
                }
            }
        }

        function checkAchievements() {
            // Money achievements
            if (gameState.money >= 5000 && !gameState.achievements.includes('money_5000')) {
                unlockAchievement('money_5000');
            }
            if (gameState.money >= 7500 && !gameState.achievements.includes('money_7500')) {
                unlockAchievement('money_7500');
            }
            if (gameState.money >= 10000 && !gameState.achievements.includes('money_10000')) {
                unlockAchievement('money_10000');
                
                // Win condition
                if (gameState.currentDay <= gameState.maxDays) {
                    setTimeout(() => {
                        alert('Congratulations! You reached RM10,000 and won the game!');
                    }, 500);
                }
            }
            
            // Skill achievements
            if (gameState.skills.financialLiteracy.level >= 3 && !gameState.achievements.includes('financial_literacy_3')) {
                unlockAchievement('financial_literacy_3');
            }
            if (gameState.skills.entrepreneurship.level >= 3 && !gameState.achievements.includes('entrepreneurship_3')) {
                unlockAchievement('entrepreneurship_3');
            }
            if (gameState.skills.education.level >= 3 && !gameState.achievements.includes('education_3')) {
                unlockAchievement('education_3');
            }
            
            // All skills level 2
            if (gameState.skills.financialLiteracy.level >= 2 && 
                gameState.skills.entrepreneurship.level >= 2 && 
                gameState.skills.education.level >= 2 && 
                !gameState.achievements.includes('all_skills_2')) {
                unlockAchievement('all_skills_2');
            }
        }

        function updateUI() {
            // Update money
            moneyDisplay.textContent = `RM${formatNumber(gameState.money)}`;
            const moneyPercentage = Math.min(100, (gameState.money / gameState.goalMoney) * 100);
            moneyProgress.style.width = `${moneyPercentage}%`;
            
            // Update day
            currentDayDisplay.textContent = gameState.currentDay;
            dayDisplay.textContent = gameState.currentDay;
            const dayPercentage = (gameState.currentDay / gameState.maxDays) * 100;
            dayProgress.style.width = `${dayPercentage}%`;
            
            // Update skills
            financialLiteracyLevel.textContent = gameState.skills.financialLiteracy.level;
            financialLiteracyProgress.style.width = `${gameState.skills.financialLiteracy.progress}%`;
            
            entrepreneurshipLevel.textContent = gameState.skills.entrepreneurship.level;
            entrepreneurshipProgress.style.width = `${gameState.skills.entrepreneurship.progress}%`;
            
            educationLevel.textContent = gameState.skills.education.level;
            educationProgress.style.width = `${gameState.skills.education.progress}%`;
            
            // Update transactions
            transactionsContainer.innerHTML = '';
            gameState.transactions.forEach(transaction => {
                const transactionEl = document.createElement('div');
                transactionEl.className = `transaction ${transaction.type}`;
                
                const content = document.createElement('div');
                content.className = 'flex justify-between';
                
                const description = document.createElement('span');
                description.textContent = transaction.description;
                
                const amount = document.createElement('span');
                amount.className = transaction.type === 'positive' 
                    ? 'font-semibold text-green-600 dark:text-green-400' 
                    : 'font-semibold text-red-600 dark:text-red-400';
                amount.textContent = transaction.type === 'positive' 
                    ? `+RM${formatNumber(transaction.amount)}` 
                    : `-RM${formatNumber(Math.abs(transaction.amount))}`;
                
                content.appendChild(description);
                content.appendChild(amount);
                transactionEl.appendChild(content);
                
                transactionsContainer.appendChild(transactionEl);
            });
            
            // Update achievements
            achievementsContainer.innerHTML = '';
            achievementsData.forEach(achievement => {
                const achieved = gameState.achievements.includes(achievement.id);
                
                const achievementEl = document.createElement('div');
                achievementEl.className = `card p-3 text-center ${achieved ? 'bg-primary bg-opacity-10' : 'opacity-50'}`;
                
                const icon = document.createElement('div');
                icon.className = 'text-2xl mb-1';
                icon.textContent = achievement.icon;
                
                const title = document.createElement('div');
                title.className = 'font-semibold text-sm';
                title.textContent = achievement.title;
                
                const description = document.createElement('div');
                description.className = 'text-xs text-gray-600 dark:text-gray-400';
                description.textContent = achievement.description;
                
                achievementEl.appendChild(icon);
                achievementEl.appendChild(title);
                achievementEl.appendChild(description);
                
                achievementsContainer.appendChild(achievementEl);
            });
        }

        function endGame() {
            // Determine if player won
            const won = gameState.money >= gameState.goalMoney;
            
            // Create modal for game end
            const modalOverlay = document.createElement('div');
            modalOverlay.className = 'modal-overlay active';
            
            const modal = document.createElement('div');
            modal.className = 'modal';
            
            const title = document.createElement('h2');
            title.className = 'text-2xl font-bold mb-4';
            title.textContent = won ? 'Congratulations!' : 'Game Over';
            
            const message = document.createElement('p');
            message.className = 'mb-6';
            message.textContent = won 
                ? `You reached your goal of RM${formatNumber(gameState.goalMoney)}! Well done!` 
                : `You reached day ${gameState.maxDays} with RM${formatNumber(gameState.money)}. Your goal was RM${formatNumber(gameState.goalMoney)}.`;
            
            const stats = document.createElement('div');
            stats.className = 'mb-6';
            stats.innerHTML = `
                <h3 class="font-semibold mb-2">Final Stats:</h3>
                <ul class="space-y-1">
                    <li>Money: RM${formatNumber(gameState.money)}</li>
                    <li>Financial Literacy: Level ${gameState.skills.financialLiteracy.level}</li>
                    <li>Entrepreneurship: Level ${gameState.skills.entrepreneurship.level}</li>
                    <li>Education: Level ${gameState.skills.education.level}</li>
                    <li>Achievements: ${gameState.achievements.length}/${achievementsData.length}</li>
                </ul>
            `;
            
            const button = document.createElement('button');
            button.className = 'bg-primary hover:bg-opacity-90 text-white rounded-lg px-6 py-3 font-bold transition-all w-full';
            button.textContent = 'Play Again';
            button.addEventListener('click', () => {
                window.location.reload();
            });
            
            modal.appendChild(title);
            modal.appendChild(message);
            modal.appendChild(stats);
            modal.appendChild(button);
            modalOverlay.appendChild(modal);
            
            document.body.appendChild(modalOverlay);
        }

        function showToast(message, type = 'info') {
            const toastContainer = document.querySelector('.toast-container');
            
            const toast = document.createElement('div');
            toast.className = 'toast';
            
            if (type === 'success') {
                toast.innerHTML = `<div class="flex items-center"><span class="mr-2 text-green-500">âœ“</span>${message}</div>`;
            } else if (type === 'error') {
                toast.innerHTML = `<div class="flex items-center"><span class="mr-2 text-red-500">âœ•</span>${message}</div>`;
            } else if (type === 'achievement') {
                toast.innerHTML = `<div class="flex items-center"><span class="mr-2 text-yellow-400">ðŸ†</span>${message}</div>`;
            } else {
                toast.textContent = message;
            }
            
            toastContainer.appendChild(toast);
            
            // Show toast
            setTimeout(() => {
                toast.classList.add('show');
            }, 10);
            
            // Remove toast after 3 seconds
            setTimeout(() => {
                toast.classList.remove('show');
                setTimeout(() => {
                    toast.remove();
                }, 500);
            }, 3000);
        }

        function shareOnFacebook() {
            const shareUrl = `https://www.facebook.com/sharer/sharer.php?u=${encodeURIComponent(window.location.href)}`;
            window.open(shareUrl, '_blank', 'width=600,height=400');
        }

        function shareOnWhatsApp() {
            const message = `I'm playing DADUit Game! I have RM${formatNumber(gameState.money)} on day ${gameState.currentDay}. Try it yourself!`;
            const shareUrl = `https://api.whatsapp.com/send?text=${encodeURIComponent(message)}`;
            window.open(shareUrl, '_blank');
        }

        function showShareOptions() {
            const fakeToastContainer = document.querySelector('.toast-container');
            
            const shareToast = document.createElement('div');
            shareToast.className = 'toast';
            shareToast.innerHTML = `
                <div class="flex flex-col space-y-2">
                    <div class="font-semibold mb-1">Share your progress:</div>
                    <button id="toast-share-fb" class="text-blue-600 dark:text-blue-400 hover:underline text-left">Share on Facebook</button>
                    <button id="toast-share-wa" class="text-green-600 dark:text-green-400 hover:underline text-left">Share on WhatsApp</button>
                </div>
            `;
            
            fakeToastContainer.appendChild(shareToast);
            
            // Add event listeners
            document.getElementById('toast-share-fb').addEventListener('click', () => {
                shareOnFacebook();
                shareToast.classList.remove('show');
                setTimeout(() => shareToast.remove(), 500);
            });
            
            document.getElementById('toast-share-wa').addEventListener('click', () => {
                shareOnWhatsApp();
                shareToast.classList.remove('show');
                setTimeout(() => shareToast.remove(), 500);
            });
            
            // Show toast
            setTimeout(() => {
                shareToast.classList.add('show');
            }, 10);
            
            // Auto-hide after 5 seconds
            setTimeout(() => {
                shareToast.classList.remove('show');
                setTimeout(() => {
                    shareToast.remove();
                }, 500);
            }, 5000);
        }

        // Helper Functions
        function getRandom(min, max) {
            return Math.floor(Math.random() * (max - min + 1)) + min;
        }

        function formatNumber(num) {
            return new Intl.NumberFormat().format(num);
        }
    </script>
</body>
</html>
